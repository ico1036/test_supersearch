# Travel Planner Execution Guide

## 실행 프롬프트 템플릿

사용자가 `/travel-planner` 또는 여행 관련 요청을 하면 다음 단계로 실행:

---

## Phase 1: 정보 수집

```
사용자 요청을 파싱하여 다음 정보 확인:

필수 정보:
- location: [추출 또는 질문]
- theme: [추출 또는 질문]
- date: [추출 또는 질문]
- time_range: [추출 또는 질문]
- group_size: [추출 또는 질문]

선택 정보:
- budget: [추출]
- preferences: [추출]
- exclusions: [추출]

누락된 필수 정보가 있으면 AskUserQuestion 도구로 수집
```

---

## Phase 2: 병렬 검색 실행

**한 번의 메시지에서 4개 WebSearch 동시 실행:**

```javascript
// 검색 1: 메인 활동/관광
WebSearch({
  query: "{location} {theme} 추천 명소 2025 2026"
})

// 검색 2: 식당/맛집
WebSearch({
  query: "{location} 맛집 {group_size}명 단체 예약 2025 2026"
})

// 검색 3: 카페/디저트
WebSearch({
  query: "{location} 카페 분위기 좋은 넓은 2025 2026"
})

// 검색 4: 거리/상권 정보
WebSearch({
  query: "{location} 핫플레이스 골목 상권 거리"
})
```

---

## Phase 3: 개별 장소 검증

각 후보 장소에 대해 추가 검색:

```javascript
// 장소별 상세 검증
WebSearch({
  query: "{장소명} 영업시간 {요일} 예약"
})

WebSearch({
  query: "{장소명} 주소 위치 주차"
})

WebSearch({
  query: "{장소명} 수용인원 단체석"
})
```

---

## Phase 4: 검증 체크리스트 적용

각 장소에 대해 다음 확인:

```markdown
### {장소명} 검증 결과

| 항목 | 상태 | 상세 |
|------|------|------|
| 영업 상태 | ✅/❌/⚠️ | {최근 리뷰 날짜, 영업 확인} |
| 위치 적합 | ✅/❌/⚠️ | {이전 장소에서 도보 X분/차량 X분} |
| 시간 적합 | ✅/❌/⚠️ | {영업시간, 브레이크타임 여부} |
| 인원 수용 | ✅/❌/⚠️ | {최대 수용 인원, 예약 필요 여부} |

소스: [링크](url)
```

---

## Phase 5: 대규모 그룹 처리 (10명+)

```
IF group_size >= 10:

1. 거리/골목 상권 중심으로 전환
2. 분산 옵션 설계:
   - 메인 집결 거리 선정
   - 해당 거리 내 3-5개 식당/카페 매핑
   - 서브그룹(5-8명 단위) 분배 계획

3. 집결 포인트 명시:
   - 정확한 주소
   - 랜드마크 기준점
   - 집결 시간
   - 우천시 대체 장소
```

---

## Phase 6: 결과 포맷팅

### 기본 출력 구조:

```markdown
# 🗺️ {theme} 여행 코스 - {location}

## 📋 여행 개요
| 항목 | 내용 |
|------|------|
| 날짜 | {date} |
| 시간 | {time_range} |
| 인원 | {group_size} |
| 테마 | {theme} |
| 예산 | {budget} |

---

## 🚶 추천 코스

### ⏰ {시간대} | {활동 유형}

**🏆 메인 추천: {장소명}**
- 📍 주소: {주소}
- ⏰ 영업: {영업시간}
- 👥 수용: {인원}
- 💰 가격대: {가격}
- ✅ 검증: 영업확인 ✓ | 위치적합 ✓ | 시간적합 ✓ | 인원수용 ✓
- 🔗 소스: [네이버 플레이스](url) | [카카오맵](url)

**📋 대안 옵션 (5개)**

| # | 장소명 | 특징 | 수용 | 예약 | 가격대 | 소스 |
|---|--------|------|------|------|--------|------|
| 1 | {name} | {특징} | {인원} | ✅/❌ | ₩{가격} | [링크](url) |
| 2 | {name} | {특징} | {인원} | ✅/❌ | ₩{가격} | [링크](url) |
| 3 | {name} | {특징} | {인원} | ✅/❌ | ₩{가격} | [링크](url) |
| 4 | {name} | {특징} | {인원} | ✅/❌ | ₩{가격} | [링크](url) |
| 5 | {name} | {특징} | {인원} | ✅/❌ | ₩{가격} | [링크](url) |

---
[시간대별 반복]
---

## 📊 전체 검증 요약

| 장소 | 영업 | 위치 | 시간 | 인원 | 종합 |
|------|------|------|------|------|------|
| {장소1} | ✅ | ✅ | ✅ | ✅ | ⭐⭐⭐ |
| {장소2} | ✅ | ⚠️ | ✅ | ✅ | ⭐⭐ |
| {장소3} | ✅ | ✅ | ⚠️ | ❌ | ⭐ |

---

## 🔗 참고 소스 목록

### 공식 플랫폼 (⭐⭐⭐)
- [네이버 플레이스 - {location}](url)
- [카카오맵 - {location}](url)

### 리뷰 사이트 (⭐⭐)
- [망고플레이트](url)
- [다이닝코드](url)

### 최신 트렌드 (⭐)
- [블로그/인스타그램](url) - {게시 날짜}

---

## ⚠️ 주의사항
- 방문 전 반드시 전화로 영업 여부 확인 권장
- 예약 필요 장소는 최소 {X}일 전 예약
- 피크 시간대 대기 가능성 있음
```

---

## 대규모 그룹 추가 섹션 (10명+)

```markdown
## 👥 대규모 그룹 가이드 ({group_size}명)

### 📍 거리 기반 분산 활동

**{시간대} - {활동 유형}**

집결 거리: **{거리명}**
- 📍 위치: {상세 위치}
- 🚇 접근: {교통 정보}

**분산 옵션:**

| 팀 | 장소 | 권장인원 | 음식종류 | 가격대 | 예약 |
|----|------|----------|----------|--------|------|
| A팀 | {장소1} | ~{n}명 | {종류} | ₩{가격} | [예약링크](url) |
| B팀 | {장소2} | ~{n}명 | {종류} | ₩{가격} | [예약링크](url) |
| C팀 | {장소3} | ~{n}명 | {종류} | ₩{가격} | 예약불필요 |
| 자유 | {거리 전체} | 무제한 | 다양 | ₩{가격} | - |

**🎯 집결 정보**
- ⏰ 집결 시간: {time}
- 📍 집결 장소: {정확한 위치}
- 🏷️ 랜드마크: {눈에 띄는 랜드마크}
- ☔ 우천시: {대체 장소}

**📱 조율 팁**
- 팀 리더 지정 및 연락처 공유
- 집결 10분 전 단톡 알림
- 각 팀별 식사 완료 후 단톡 보고
```

---

## 에러 핸들링

```markdown
### 검색 결과 부족시

"해당 지역의 {검색 조건} 정보가 충분하지 않습니다.

대안:
1. 인근 지역({nearby_area})까지 확장 검색
2. 테마 조건 완화 ({alternative_theme})
3. 인원 조건 조정 ({adjusted_size})

어떤 방향으로 진행할까요?"
```

```markdown
### 모든 장소 부적합시

"현재 조건으로는 적합한 장소를 찾기 어렵습니다.

현재 조건:
- {condition_list}

조정 제안:
1. 날짜 변경 (평일 추천)
2. 시간대 변경
3. 지역 확장
4. 인원 분산 (여러 그룹으로)

어떤 조건을 조정할까요?"
```

---

## 검색 쿼리 최적화 팁

```markdown
### 효과적인 검색 쿼리 패턴

1. 단체 식사: "{location} 단체석 {n}명 맛집 예약"
2. 영업 확인: "{장소명} site:naver.com 플레이스"
3. 최신 정보: "{location} {theme} 2025 2026 추천"
4. 거리 상권: "{location} 골목 상권 먹자골목 카페거리"
5. 피크 타임: "{장소명} 웨이팅 대기시간 주말"
```

---

## 체크리스트 (실행 전 확인)

```
□ 모든 필수 파라미터 수집 완료
□ 4개 병렬 검색 실행
□ 각 장소 4항목 검증 완료
□ 5개 이상 대안 옵션 제시
□ 모든 장소에 소스 링크 첨부
□ 대규모 그룹시 분산 모드 적용
□ 동선 최적화 확인
□ 검증 요약 테이블 포함
□ results/ 디렉토리에 MD 파일 저장 완료 ← 필수!
```

---

## Phase 7: MD 파일 저장 (필수)

스킬 실행 완료 후 반드시 결과를 MD 파일로 저장:

### 저장 규칙

```
저장 위치: results/
파일명: {location}-travel-plan-{YYYY-MM}.md
인코딩: UTF-8
```

### 파일명 예시

| 입력 | 파일명 |
|------|--------|
| 강릉, 2025년 5월 | `gangneung-travel-plan-2025-05.md` |
| 서울 성수동, 2025년 3월 | `seoul-seongsu-travel-plan-2025-03.md` |
| 부산 해운대, 2025년 4월 | `busan-haeundae-travel-plan-2025-04.md` |

### 저장 프로세스

```javascript
// Phase 7: 결과 저장
Write({
  file_path: "results/{location}-travel-plan-{YYYY-MM}.md",
  content: [전체 마크다운 결과]
})
```

### 저장 후 확인

```
✅ 파일 저장 완료: results/{filename}.md
```

사용자에게 파일 경로를 안내:
```
결과가 저장되었습니다: results/{filename}.md
```
