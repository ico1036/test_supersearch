# Travel Planner Skill - 테마 기반 여행 일정 작성

## Metadata
- **Name**: travel-planner
- **Description**: 테마와 장소 기반으로 최적의 여행 코스를 설계하고, 검증된 식당/카페/활동을 5개 이상의 옵션으로 제공
- **Version**: 1.0.0
- **Use Cases**: "여행 계획", "여행 코스", "데이트 코스", "맛집 투어", "테마 여행", "단체 여행", "워크샵 일정"

---

## Core Purpose

사용자가 입력한 **장소 + 테마 + 세부 정보**를 기반으로:
1. 최적의 동선을 고려한 여행 코스 설계
2. 각 포인트별 5개 이상의 대안 제시 (식당, 카페, 활동)
3. 실시간 검증 (영업 상태, 위치, 시간, 수용 인원)
4. 대규모 그룹을 위한 "거리 기반" 분산 활동 설계

---

## Input Parameters

사용자로부터 다음 정보를 수집:

| 파라미터 | 필수 | 설명 | 예시 |
|----------|------|------|------|
| `location` | ✅ | 여행 장소 (도시/지역) | "서울 성수동", "부산 해운대" |
| `theme` | ✅ | 여행 테마 | "힐링", "맛집 투어", "역사 탐방", "데이트", "팀빌딩" |
| `date` | ✅ | 여행 날짜 | "2025-02-15 토요일" |
| `time_range` | ✅ | 활동 시간대 | "10:00 - 20:00" |
| `group_size` | ✅ | 참여 인원 수 | "4명", "30명" |
| `budget` | ⬚ | 예산 범위 | "1인 5만원", "총 50만원" |
| `preferences` | ⬚ | 추가 선호사항 | "비건 옵션 필요", "주차 필수", "휠체어 접근성" |
| `exclusions` | ⬚ | 제외 조건 | "해산물 알러지", "술집 제외" |

---

## Validation Checklist (필수 검증 항목)

모든 추천 장소에 대해 다음 4가지를 반드시 확인:

### 1. 영업 상태 확인 (Is it Open?)
```
- [ ] 현재 영업 중인 업체인지 확인
- [ ] 폐업/휴업 여부 체크
- [ ] 최근 리뷰 날짜로 활성 상태 검증
```

### 2. 위치 적절성 (Location Fit)
```
- [ ] 이전 장소에서 도보/차량 이동 시간 계산
- [ ] 동선 최적화 (지그재그 이동 방지)
- [ ] 주차 가능 여부 (차량 이동시)
```

### 3. 운영 시간 확인 (Operating Hours)
```
- [ ] 여행 당일 요일별 영업 시간 확인
- [ ] 브레이크 타임 체크
- [ ] 라스트 오더 시간 확인
```

### 4. 수용 인원 체크 (Capacity Check)
```
- [ ] 예상 방문 인원 수용 가능 여부
- [ ] 예약 필요 여부
- [ ] 대기 시간 예상 (피크 타임 여부)
```

---

## Execution Workflow

### Step 1: 입력 파싱 및 확인
사용자 요청에서 필수 파라미터 추출. 누락된 정보는 AskUserQuestion으로 수집.

### Step 2: 병렬 웹 검색 (Parallel Search)

다음 4개의 검색을 동시 실행:

| 검색 대상 | 검색 방법 | 검색 쿼리 예시 |
|-----------|-----------|----------------|
| 맛집/식당 | WebSearch | `"{location} {theme} 맛집 2025 추천"` |
| 카페/디저트 | WebSearch | `"{location} 카페 분위기 좋은 2025"` |
| 활동/체험 | WebSearch | `"{location} {theme} 체험 액티비티"` |
| 거리/상권 | WebSearch | `"{location} 골목 상권 핫플레이스"` |

**검색 소스 우선순위:**
1. 네이버 플레이스 / 카카오맵 (영업 정보 신뢰도 높음)
2. 망고플레이트 / 다이닝코드 (맛집 전문)
3. 트립어드바이저 / 구글맵 (리뷰 다양성)
4. 블로그/인스타그램 (최신 트렌드)

### Step 3: 검증 및 필터링

각 장소에 대해 Validation Checklist 4항목 확인:

```
For each place:
  1. WebSearch: "{장소명} 영업시간 {여행날짜 요일}"
  2. WebSearch: "{장소명} 예약 {인원수}명"
  3. WebSearch: "{장소명} 위치 주소"
  4. 위치 기반 동선 최적화 검토
```

### Step 4: 대규모 그룹 처리 (10명 이상)

```
IF group_size >= 10:
  - 단일 장소 대신 "거리/골목 상권" 중심 추천
  - 해당 거리 내 3-5개 분산 옵션 제시
  - 집결 포인트 및 분산 동선 설계
  - 각 서브그룹별 추천 장소 매핑
```

**거리 기반 분산 활동 예시:**
```
📍 성수 연무장길 (집결 지점: 성수역 3번 출구)
├── 식사 옵션 A: 레이어드 (6인 테이블 3개)
├── 식사 옵션 B: 어니언 (8인 단체석)
├── 식사 옵션 C: 수요미식회 국수집 (대기 없음)
├── 식사 옵션 D: 성수 분식골목 (자유 선택)
└── 식사 옵션 E: 푸드트럭존 (야외, 인원 무관)

⏰ 집결 시간: 13:30
📍 집결 장소: 성수역 3번 출구 카카오 프렌즈샵 앞
```

### Step 5: 결과 구성 및 파일 저장

검색 및 검증이 완료되면:
1. 결과를 마크다운 형식으로 구성
2. `results/` 디렉토리에 MD 파일로 저장
3. 파일명 규칙: `{location}-travel-plan-{YYYY-MM}.md`

```
예시: results/gangneung-travel-plan-2025-05.md
```

---

## Output File Requirements (필수 출력 파일)

### 파일 저장 규칙
- **저장 위치**: `results/` 디렉토리
- **파일 형식**: Markdown (.md)
- **파일명 패턴**: `{location}-travel-plan-{YYYY-MM}.md`
- **인코딩**: UTF-8

### 파일 생성 시점
스킬 실행 완료 후 반드시 Write 도구를 사용하여 결과를 MD 파일로 저장해야 함.

```
실행 완료 → Write tool → results/{filename}.md
```

### 파일 구조 예시
```
project/
├── skills/
│   └── travel-planner/
│       ├── SKILL.md
│       ├── EXECUTE.md
│       └── README.md
└── results/
    ├── gangneung-travel-plan-2025-05.md
    ├── seoul-seongsu-travel-plan-2025-03.md
    └── busan-haeundae-travel-plan-2025-04.md
```

---

## Output Structure

### 기본 형식

```markdown
# 🗺️ {theme} 여행 코스 - {location}

## 📋 여행 개요
- **날짜**: {date}
- **시간**: {time_range}
- **인원**: {group_size}
- **테마**: {theme}

---

## 🚶 추천 코스 (동선 최적화)

### ⏰ 10:00-12:00 | 오전 활동
**메인 추천**: {장소명}
- 📍 주소: {주소}
- ⏰ 영업: {영업시간}
- 👥 수용: {인원} | ✅ 검증됨
- 🔗 [네이버 플레이스](url) | [카카오맵](url)

**대안 옵션 (5개)**:
| 순위 | 장소명 | 특징 | 수용인원 | 예약필요 | 링크 |
|------|--------|------|----------|----------|------|
| 1 | A | ... | 20명 | ✅ | [링크](url) |
| 2 | B | ... | 15명 | ❌ | [링크](url) |
| 3 | C | ... | 무제한 | ❌ | [링크](url) |
| 4 | D | ... | 30명 | ✅ | [링크](url) |
| 5 | E | ... | 10명 | ❌ | [링크](url) |

---

### ⏰ 12:00-14:00 | 점심 식사
[동일 형식 반복]

---

### ⏰ 14:00-17:00 | 오후 활동
[동일 형식 반복]

---

### ⏰ 17:00-19:00 | 카페/휴식
[동일 형식 반복]

---

### ⏰ 19:00-21:00 | 저녁 식사
[동일 형식 반복]

---

## 📊 검증 요약

| 장소 | 영업확인 | 위치적합 | 시간적합 | 인원수용 |
|------|----------|----------|----------|----------|
| A    | ✅       | ✅       | ✅       | ✅       |
| B    | ✅       | ✅       | ⚠️ 브레이크타임 | ✅ |
| C    | ✅       | ⚠️ 도보 15분 | ✅  | ❌ 예약필수 |

---

## 🔗 참고 소스
- [네이버 플레이스 - {location}](url)
- [카카오맵 - {location}](url)
- [망고플레이트 - {theme}](url)
- [트립어드바이저](url)
```

---

## Large Group Mode (대규모 그룹 모드)

10명 이상 그룹의 경우 추가 섹션:

```markdown
## 👥 대규모 그룹 가이드 (30명)

### 📍 거리 기반 분산 활동

**점심 시간대 (12:00-14:00)**
집결 거리: 연남동 경의선숲길 일대

| 그룹 | 추천 장소 | 인원 | 음식 종류 | 가격대 |
|------|-----------|------|-----------|--------|
| A팀 (10명) | 연남살롱 | 12명 | 브런치 | ₩15,000 |
| B팀 (10명) | 홍익떡볶이 | 20명 | 분식 | ₩8,000 |
| C팀 (10명) | 연남동 국수거리 | 무제한 | 국수/면 | ₩10,000 |

**집결 포인트**
- ⏰ 14:00 집결
- 📍 경의선숲길 연트럴파크 입구
- 🎯 랜드마크: 연남방앗간 앞 벤치

**분산 시 주의사항**
- 각 팀 리더 연락처 공유
- 집결 10분 전 단톡방 알림
- 우천시 대체 집결지: 연남동 카페거리 스타벅스
```

---

## Source Attribution Rules

### 필수 소스 첨부
- 모든 장소에 최소 1개 이상의 공식/신뢰 소스 링크 필수
- 영업 정보: 네이버 플레이스, 카카오맵 우선
- 리뷰 정보: 망고플레이트, 트립어드바이저
- 최신 트렌드: 인스타그램, 블로그 (6개월 이내 게시물)

### 소스 신뢰도 등급
| 등급 | 소스 유형 | 예시 |
|------|-----------|------|
| ⭐⭐⭐ | 공식 플랫폼 | 네이버 플레이스, 카카오맵, 구글맵 |
| ⭐⭐ | 전문 리뷰 | 망고플레이트, 다이닝코드, 트립어드바이저 |
| ⭐ | 개인 리뷰 | 블로그, 인스타그램 (최신 3개월 이내만) |

---

## Error Handling

| 상황 | 대응 |
|------|------|
| 영업 정보 미확인 | ⚠️ 표시 + "방문 전 전화 확인 권장" |
| 인원 수용 불확실 | 예약 필수 표시 + 대안 장소 우선 제시 |
| 검색 결과 부족 | 인근 지역 확장 검색 + 키워드 변형 |
| 모든 옵션 부적합 | 사용자에게 조건 완화 제안 |

---

## Example Invocation

**사용자 입력:**
```
성수동에서 20명 팀빌딩 워크샵 후 저녁 식사 코스 짜줘.
날짜는 2025년 2월 15일 토요일, 오후 2시부터 저녁 9시까지.
예산은 1인 4만원, 술집 제외하고 주차 가능한 곳으로.
```

**파싱 결과:**
```json
{
  "location": "서울 성수동",
  "theme": "팀빌딩",
  "date": "2025-02-15 토요일",
  "time_range": "14:00-21:00",
  "group_size": 20,
  "budget": "1인 40,000원",
  "preferences": ["주차 가능"],
  "exclusions": ["술집"]
}
```

**실행 흐름:**
1. 20명 → 대규모 그룹 모드 활성화
2. 성수동 팀빌딩 공간 검색
3. 성수동 거리/골목 상권 검색 (분산 식사용)
4. 각 장소 4항목 검증
5. 동선 최적화된 코스 + 5개 대안 제시

---

## Final Output Checklist (최종 출력 체크리스트)

스킬 실행 완료 시 반드시 확인:

```
□ 모든 장소 4항목 검증 완료
□ 각 시간대별 5개 이상 대안 옵션 제시
□ 모든 장소에 신뢰할 수 있는 소스 링크 첨부
□ 검증 요약 테이블 포함
□ 주의사항 및 연락처 포함
□ results/ 디렉토리에 MD 파일 저장 완료 ← 필수!
```

**MD 파일 미저장 시**: 사용자에게 결과를 보여준 후 반드시 "MD 파일로 저장할까요?" 확인

---

## Version History

| 버전 | 날짜 | 변경 사항 |
|------|------|-----------|
| 1.0.0 | 2025-01 | 초기 버전 - 테마 여행 코스 생성 |
| 1.1.0 | 2025-01 | MD 파일 자동 저장 기능 추가 |
